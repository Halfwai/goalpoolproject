{% extends "goalpoolapp/layout.html" %}

{% load static %}
{% block title %}
    Classic League
{% endblock %}
{% block body %}
<div id="main-page-content-container">
    <div id="main-page-content">
        <h2>Welcome {{ user.username }}!</h2>
        <br>
        {% if not team %}
        <h3>You currently do not have a team registered for the global league</h3>
        <a class="button" href="{% url 'goalpoolapp:createglobalteam' %}">Click here to create a team</a>
        {% else %}
            <div class="leaguecontainer">
                <h3>Global League</h3>
                <hr>
                <div class="leagueinformation">
                    <div class="leaguetablecontainer">
                        <div class="split-flexbox">
                            <div>
                                <h5>{{ team.teamname }}</h5>
                                <h6>Current Week Roster</h6>
                            </div>
                            <br>
                            <div>
                                <a class="button" href="{% url 'goalpoolapp:globaltransfers' %}">Make transfers</a>
                            </div>
                            <br>
                        </div>
                        <table class="leaguetable">
                            <tr>
                                <th>Player Name</th>
                                <th>Total Goals</th>
                                <th>Current Week Goals</th>
                            </tr>
                            {% for player in team.players.all %}
                            <tr>
                                <td>{{ player.nickname }}</td>
                                <td>{{ player.goals }}</td>
                                <td>{{ player.currentweekgoals }}</td>
                            </tr>
                            {% endfor %}
                        </table>
                        <div class="split-flexbox">
                            <h6>
                                Your Team's Total Goals: {{ team.totalgoals }}
                            </h6>
                            <h6>
                                Current Ranking: {{ team.rank }}
                            </h6>
                        </div>
                  
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
</div>

{% endblock %}